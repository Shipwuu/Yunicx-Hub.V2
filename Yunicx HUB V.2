-- Step 1: Create the ScreenGui
local existingScreenGui = game:GetService("CoreGui"):FindFirstChild("ShipuHub")
if existingScreenGui then
    existingScreenGui:Destroy() -- Destroy the previous ScreenGui if it exists
end

local ShipuHub = Instance.new("ScreenGui")
ShipuHub.Name = "ShipuHub"
ShipuHub.Parent = game:GetService("CoreGui")

local UltraFrame = Instance.new("Frame")
UltraFrame.Name = "UltraFrame"
UltraFrame.Size = UDim2.new(0.4, 0, 0, 47)  -- Updated size
UltraFrame.Position = UDim2.new(0.6, 0, 0, -46)  -- Updated position
UltraFrame.BackgroundTransparency = 1
UltraFrame.Parent = ShipuHub

-- Step 2: Create the MainFrame
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0.4, 0, 0, 47)  -- Updated size
MainFrame.Position = UDim2.new(0.6, 0, 0, -46)  -- Updated position
MainFrame.BackgroundTransparency = 1
MainFrame.Parent = UltraFrame

local ButtonLayout = Instance.new("UIListLayout")
ButtonLayout.FillDirection = Enum.FillDirection.Horizontal
ButtonLayout.Padding = UDim.new(0, 9)
ButtonLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
ButtonLayout.VerticalAlignment = Enum.VerticalAlignment.Center
ButtonLayout.Parent = MainFrame

-- Step 3: Create SecondMainFrame and Parent it to MainFrame
local SecondMainFrame = Instance.new("Frame")
SecondMainFrame.Name = "Script File"
SecondMainFrame.Size = UDim2.new(0.5, 60, 0, 48)  -- Updated size
SecondMainFrame.Position = UDim2.new(0, 0, 0, 0)  -- Updated position
SecondMainFrame.BackgroundColor3 = Color3.fromRGB(85, 255, 255)
SecondMainFrame.BackgroundTransparency = 0.4
SecondMainFrame.Parent = MainFrame  -- Now parent to MainFrame

-- Create SettingUIFrame
local SettingUIFrame = Instance.new("Frame")
SettingUIFrame.Name = "UISetting"
SettingUIFrame.Size = UDim2.new(0, 58, 0, 48)
SettingUIFrame.Position = UDim2.new(0, 0, 0, 0)
SettingUIFrame.BackgroundColor3 = Color3.fromRGB(85, 255, 255)
SettingUIFrame.BackgroundTransparency = 0.4
SettingUIFrame.Parent = MainFrame  -- Parent to MainFrame

-- Tweening for expanding SettingUIFrame and changing image with fade-in and fade-out
local isOpen = false -- Track the toggle state
local TweenService = game:GetService("TweenService")

local function toggleUI()
    if isOpen then
        -- Close the SettingUIFrame
        local closeTween = TweenService:Create(
            SettingUIFrame,
            TweenInfo.new(0.5, Enum.EasingStyle.Exponential, Enum.EasingDirection.Out),
            {Size = UDim2.new(0, 58, 0, 48)}
        )
        closeTween:Play()

        -- Fade out and change the image back to the right arrow
        local closeImageTween = TweenService:Create(
            ToggleUISetting,
            TweenInfo.new(0.2, Enum.EasingStyle.Exponential, Enum.EasingDirection.Out),
            {ImageTransparency = 1}
        )
        closeImageTween:Play()
        
        -- Wait for the fade-out to finish, then change the image
        closeImageTween.Completed:Connect(function()
            ToggleUISetting.Image = "rbxthumb://type=Asset&id=81494025675609&w=420&h=420" -- Arrow pointing to the right
            -- Fade in the new image
            local fadeInTween = TweenService:Create(
                ToggleUISetting,
                TweenInfo.new(0.2, Enum.EasingStyle.Exponential, Enum.EasingDirection.Out),
                {ImageTransparency = 0}
            )
            fadeInTween:Play()
        end)
    else
        -- Open the SettingUIFrame
        local openTween = TweenService:Create(
            SettingUIFrame,
            TweenInfo.new(0.5, Enum.EasingStyle.Exponential, Enum.EasingDirection.Out),
            {Size = UDim2.new(0.2, 25, 0, 48)}
        )
        openTween:Play()

        -- Fade out and change the image to the left arrow
        local openImageTween = TweenService:Create(
            ToggleUISetting,
            TweenInfo.new(0.2, Enum.EasingStyle.Exponential, Enum.EasingDirection.Out),
            {ImageTransparency = 1}
        )
        openImageTween:Play()

        -- Wait for the fade-out to finish, then change the image
        openImageTween.Completed:Connect(function()
            ToggleUISetting.Image = "rbxthumb://type=Asset&id=117802441000023&w=420&h=420" -- Arrow pointing to the left
            -- Fade in the new image
            local fadeInTween = TweenService:Create(
                ToggleUISetting,
                TweenInfo.new(0.2, Enum.EasingStyle.Exponential, Enum.EasingDirection.Out),
                {ImageTransparency = 0}
            )
            fadeInTween:Play()
        end)
    end

    -- Toggle the open state
    isOpen = not isOpen
end

-- Connect the ToggleUISetting button to toggle functionality
ToggleUISetting.MouseButton1Click:Connect(toggleUI)
